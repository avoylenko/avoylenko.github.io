{"openapi":"3.1.0","paths":{"/api/v1/sdk/conversations":{"post":{"operationId":"SdkController_createConversation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SdkCreateConversationDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SdkCreateConversationResponseData"}}}}},"summary":"Create Conversation","tags":["SDK"]},"get":{"operationId":"SdkController_getConversation","parameters":[{"name":"limit","required":false,"in":"query","description":"Get messages limit","schema":{"example":20,"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SdkGetConversationData"}}}}},"security":[{"access_token":[]}],"summary":"Get Conversation","tags":["SDK"]}},"/api/v1/sdk/conversations/messages":{"post":{"operationId":"SdkController_createMessage","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"attachments[]":{"type":"string","format":"binary"},"message":{"type":"object","properties":{"content":{"type":"string","example":"Hello world"},"echo_id":{"type":"string","example":"76af69fb-2366-40ed-b335-454d4725bc20"}}}}}}}},"responses":{"200":{"description":"Success"}},"security":[{"access_token":[]}],"summary":"Create Message","tags":["SDK"]},"get":{"operationId":"SdkController_getMessages","parameters":[{"name":"before","required":false,"in":"query","description":"Get messages before this id","schema":{"example":20,"type":"string"}},{"name":"after","required":false,"in":"query","description":"Get messages after this id","schema":{"example":10,"type":"string"}},{"name":"limit","required":false,"in":"query","description":"messages limit","schema":{"example":20,"type":"string"}},{"name":"updated_at","required":false,"in":"query","description":"  timestamp","schema":{"example":1745349358080,"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SdkMessageData"}}}}}},"security":[{"access_token":[]}],"summary":"Get Messages","tags":["SDK"]}},"/api/v1/sdk/settings":{"get":{"operationId":"SdkController_getSettings","parameters":[],"responses":{"200":{"description":"Success"}},"tags":["SDK"]}},"/api/v1/sdk/conversations/messages/status":{"patch":{"operationId":"SdkController_updateMessageStatus","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SdkUpdateMessageStatusDto"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExceptionBadRequest"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExceptionNotFound"}}}}},"security":[{"access_token":[]}],"summary":"Update status of the messages","tags":["SDK"]}}},"info":{"title":"NovaTalks SDK API","description":"This is the API documentation for NovaTalks","version":"1.0.0","contact":{"name":"NovaIT Support","url":"","email":"support@novait.com.ua"}},"tags":[],"servers":[],"components":{"securitySchemes":{"access_token":{"type":"apiKey","name":"access_token","in":"header","description":"SDK token for authentication - contact_inbox pubsubToken"}},"schemas":{"SdkMessageDto":{"type":"object","properties":{"content":{"type":"string","nullable":true,"description":"The content of the Message","example":"content"},"echo_id":{"type":"string","description":"The echo_id of the Message","example":"1234512"}},"required":["echo_id"]},"SdkCreateConversationDto":{"type":"object","properties":{"name":{"type":"string","description":"The name of the Contact","example":"Agent 1"},"email":{"type":"string","maxLength":74,"format":"email","description":"The email of the Contact","example":"test@gmail.com"},"phone_number":{"type":"string","description":"The phone number of the Contact","example":"+1415555555"},"custom_attributes":{"type":"object","description":"The custom attributes of the Contact","example":{"key":"value"}},"additional_attributes":{"type":"object","description":"The additional attributes of the Contact","example":{"key":"value"}},"message":{"description":"The message of the Contact","allOf":[{"$ref":"#/components/schemas/SdkMessageDto"}]}},"required":["name"]},"SdkContactData":{"type":"object","properties":{"id":{"type":"number","description":"The ID of the Contact","example":1},"email":{"type":"string","description":"The email of the Contact","example":"test@gmail.com"},"name":{"type":"string","description":"The name of the Contact","example":"name"},"phone_number":{"type":"string","description":"The phone number of the Contact","example":"+1415555555"},"additional_attributes":{"type":"object","description":"The additional attributes of the Contact","example":{"key":"value"}},"custom_attributes":{"type":"object","description":"The custom attributes of the Contact","example":{"key":"value"}}},"required":["id","email","name","phone_number","additional_attributes","custom_attributes"]},"SdkContactInboxData":{"type":"object","properties":{"pubsubToken":{"type":"string","description":"The pubsubToken of the Contact Inbox","example":"LS1hOwYzdIpkWmFzZcnhRH"}},"required":["pubsubToken"]},"SdkConversationData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Conversation","example":1},"status":{"type":"string","description":"The status of the Conversation","example":"open","enum":["open","resolved","pending","snoozed"]},"substatus":{"type":"string","description":"The substatus of the Conversation","example":"oninbox","enum":["alerting","dialing","contacting","interacting","onteam","oninbox","inqueue","hold","acw"]}},"required":["id","status","substatus"]},"SdkCreateConversationPayload":{"type":"object","properties":{"contact":{"description":"The contact of the Conversation","allOf":[{"$ref":"#/components/schemas/SdkContactData"}]},"contactInbox":{"description":"The contact inbox","allOf":[{"$ref":"#/components/schemas/SdkContactInboxData"}]},"account_id":{"type":"number","description":"The account Id of the Conversation","example":1},"conversation":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/SdkConversationData"}]}},"required":["contact","contactInbox","account_id","conversation"]},"SdkCreateConversationResponseData":{"type":"object","properties":{"payload":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/SdkCreateConversationPayload"}]}},"required":["payload"]},"SdkGetConversationPayload":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Conversation","example":1},"status":{"type":"string","description":"The status of the Conversation","example":"open","enum":["open","resolved","pending","snoozed"]},"contact_inbox_id":{"type":"number","description":"The contact inbox id of the Conversation","example":1},"substatus":{"type":"string","description":"The substatus of the Conversation","example":"oninbox","enum":["alerting","dialing","contacting","interacting","onteam","oninbox","inqueue","hold","acw"]}},"required":["id","status","contact_inbox_id","substatus"]},"SenderData":{"type":"object","properties":{"id":{"type":"number","description":"The id of the sender","example":1},"name":{"type":"string","description":"The name of the sender","example":"name"},"displayName":{"type":"string","description":"The display name of the sender","example":"display name"}},"required":["id","name","displayName"]},"MessageData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Message","example":1},"content":{"type":"string","description":"The content of the Message","example":"content"},"account_id":{"type":"number","description":"The accountId of the Message","example":1},"inbox_id":{"type":"number","description":"The inboxId of the Message","example":1},"conversation_id":{"type":"number","description":"The conversationId of the Message","example":1},"dialog_id":{"type":"string","description":"The dialogId of the Message","example":"x1111xx1-11x1-1111-x1x1-1x1111x1xxx1"},"message_type":{"type":"string","description":"The messageType of the Message","example":"incoming","enum":["incoming","outgoing","activity","template"]},"private":{"type":"boolean","description":"The private of the Message","example":true},"pinned":{"type":"boolean","description":"Is pinned message","example":true},"status":{"type":"string","description":"The status of the Message","example":"delivered","enum":["sent","delivered","seen","failed"]},"source_id":{"type":"string","description":"The sourceId of the Message","example":"source_id"},"content_type":{"type":"string","description":"The content_type of the Message","enum":["text","input_text","input_textarea","input_email","input_select","card","form","article","incoming_email","input_csat","quick_reply","postback","link","feedback"],"example":"text"},"content_attributes":{"type":"object","description":"The content_attributes of the Message","example":{"testAttrKey":"testAttrValue"}},"sender_type":{"type":"string","description":"The sender_type of the Message","enum":["Contact","User","AgentBot"],"example":"User"},"sender_id":{"type":"number","description":"The sender_id of the Message","example":"sender_id"},"external_source_ids":{"type":"object","description":"The external_source_ids of the Message","example":{}},"created_at":{"type":"number","description":"The created_at of the Message","example":1673611023},"updated_at":{"type":"number","description":"The updated_at of the Message","example":1673611099},"attachments":{"type":"object","description":"The attachments of the Message","example":[]},"echo_id":{"type":"string","description":"The echo_id of the Message","example":"ccfd129e40a3"},"sender":{"description":"The sender of the Message","allOf":[{"$ref":"#/components/schemas/SenderData"}]}},"required":["id","content","account_id","inbox_id","conversation_id","dialog_id","message_type","private","pinned","status","source_id","content_type","content_attributes","sender_type","sender_id","external_source_ids","created_at","updated_at","attachments","echo_id","sender"]},"SdkGetConversationData":{"type":"object","properties":{"conversation":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/SdkGetConversationPayload"}]},"messages":{"description":"The messages of the Conversation","type":"array","items":{"$ref":"#/components/schemas/MessageData"}}},"required":["conversation","messages"]},"SdkMessageAttachmentData":{"type":"object","properties":{"id":{"type":"number","description":"The id of the attachment","example":1},"message_id":{"type":"number","description":"The messageId of the attachment","example":1},"account_id":{"type":"number","description":"The accountId of the attachment","example":1},"file_type":{"type":"string","description":"The type of the attachment","example":"image","enum":["image","audio","video","file","location","fallback","contact"]},"fallback_title":{"type":"string","description":"The fallback title of the attachment","example":null},"extension":{"type":"string","description":"The extension of the attachment","example":null},"data_url":{"type":"string","description":"The data url of the attachment","example":"http://"},"thumb_url":{"type":"string","description":"The thumbnail url of the attachment","example":"http://"},"file_size":{"type":"number","description":"The file size of the attachment","example":1199440},"mime_type":{"type":"string","description":"The mime type of the attachment","example":"image/png"}},"required":["id","message_id","account_id","file_type","fallback_title","extension","data_url","thumb_url","file_size","mime_type"]},"SdkSenderData":{"type":"object","properties":{"id":{"type":"number","description":"The id of the sender","example":1},"name":{"type":"string","description":"The name of the sender","example":"name"},"displayName":{"type":"string","description":"The display name of the sender","example":"display name"},"avatar_url":{"type":"string","description":"The avatar of the sender","example":"https://www.gravatar.com/avatar/245cf079454dc9a3374a7c076de247cc?d=404"}},"required":["id","name","displayName","avatar_url"]},"SdkMessageData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Message","example":1},"account_id":{"type":"number","description":"The accountId of the Message","example":1},"content":{"type":"string","description":"The content of the Message","example":"content"},"inbox_id":{"type":"number","description":"The inboxId of the Message","example":1},"conversation_id":{"type":"number","description":"The conversationId of the Message","example":1},"dialog_id":{"type":"string","description":"The dialogId of the Message","example":"x1111xx1-11x1-1111-x1x1-1x1111x1xxx1"},"message_type":{"type":"string","description":"The messageType of the Message","example":"incoming","enum":["incoming","outgoing","activity","template"]},"private":{"type":"boolean","description":"The private of the Message","example":true},"pinned":{"type":"boolean","description":"Is pinned message","example":true},"status":{"type":"string","description":"The status of the Message","example":"delivered","enum":["sent","delivered","seen","failed"]},"source_id":{"type":"string","description":"The sourceId of the Message","example":"source_id"},"content_type":{"type":"string","description":"The content_type of the Message","enum":["text","input_text","input_textarea","input_email","input_select","card","form","article","incoming_email","input_csat","quick_reply","postback","link","feedback"],"example":"text"},"content_attributes":{"type":"object","description":"The content_attributes of the Message","example":{"testAttrKey":"testAttrValue"}},"sender_type":{"type":"string","description":"The sender_type of the Message","enum":["Contact","User","AgentBot"],"example":"User"},"sender_id":{"type":"number","description":"The sender_id of the Message","example":"sender_id"},"external_source_ids":{"type":"object","description":"The external_source_ids of the Message","example":{}},"created_at":{"type":"number","description":"The created_at of the Message","example":1745349358080},"updated_at":{"type":"number","description":"The updated_at of the Message milliseconds","example":1745349358080},"echo_id":{"type":"string","description":"The echo_id of the Message","example":"ccfd129e40a3"},"attachments":{"description":"The attachments of the Message","type":"array","items":{"$ref":"#/components/schemas/SdkMessageAttachmentData"}},"sender":{"description":"The sender of the Message","allOf":[{"$ref":"#/components/schemas/SdkSenderData"}]}},"required":["id","account_id","content","inbox_id","conversation_id","dialog_id","message_type","private","pinned","status","source_id","content_type","content_attributes","sender_type","sender_id","external_source_ids","created_at","updated_at","echo_id","attachments","sender"]},"SdkUpdateMessageStatusDto":{"type":"object","properties":{"status":{"enum":["sent","delivered","seen","failed"],"type":"string","description":"The message status to be changed to","example":"seen"},"messageIds":{"description":"The array of messages ids","example":[1,2],"type":"array","items":{"type":"number"}}},"required":["status","messageIds"]},"ExceptionBadRequest":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Validation failed"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message","error"]},"ExceptionNotFound":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message","error"]}}}}