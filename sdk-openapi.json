{"openapi":"3.1.0","paths":{"/api/v1/sdk/conversations":{"post":{"operationId":"SdkController_createConversation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConversationWidgetDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WidgetCreateConversationPayload"}}}}},"summary":"Create Conversation","tags":["SDK"]},"get":{"operationId":"SdkController_getConversation","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WidgetConversationPayload"}}}}},"security":[{"access_token":[]}],"summary":"Get Conversation","tags":["SDK"]}},"/api/v1/sdk/conversations/messages":{"post":{"operationId":"SdkController_createMessage","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"attachments[]":{"type":"string","format":"binary"},"message":{"type":"object","properties":{"content":{"type":"string"},"echo_id":{"type":"string"}}}}}}}},"responses":{"200":{"description":""}},"security":[{"access_token":[]}],"summary":"Create Message","tags":["SDK"]},"get":{"operationId":"SdkController_getMessages","parameters":[{"name":"before","required":false,"in":"query","schema":{"example":20,"type":"string"}},{"name":"after","required":false,"in":"query","schema":{"example":10,"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageData"}}}}}},"security":[{"access_token":[]}],"summary":"Get Messages","tags":["SDK"]}},"/api/v1/sdk/settings":{"get":{"operationId":"SdkController_getSettings","parameters":[],"responses":{"200":{"description":"Success"}},"tags":["SDK"]}},"/api/v1/sdk/avatar":{"get":{"operationId":"SdkController_getAvatar","parameters":[{"name":"agentId","required":true,"in":"query","schema":{"example":1,"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WidgetGetAvatarPayload"}}}}}},"security":[{"access_token":[]}],"summary":"Get Agent Avatar URL","tags":["SDK"]}},"/api/v1/sdk/conversations/messages/status":{"patch":{"operationId":"SdkController_updateMessageStatus","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WidgetUpdateMessageStatusDto"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExceptionBadRequest"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExceptionNotFound"}}}}},"security":[{"access_token":[]}],"summary":"Update status of the messages","tags":["SDK"]}},"/api/v1/sdk/contact":{"post":{"operationId":"SdkController_getContactData","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SdkGetContactDataDto"}}}},"responses":{"200":{"description":""}},"summary":"Get Contact Data","tags":["SDK"]}}},"info":{"title":"NovaTalks SDK API","description":"This is the API documentation for NovaTalks","version":"1.0.0","contact":{"name":"NovaIT Support","url":"","email":"support@novait.com.ua"}},"tags":[],"servers":[],"components":{"securitySchemes":{"access_token":{"type":"apiKey","name":"access_token","in":"header","description":"SDK token for authentication - contact_inbox pubsubToken"}},"schemas":{"WidgetMessageDto":{"type":"object","properties":{"content":{"type":"string","description":"The content of the Message","example":"content"},"echo_id":{"type":"string","description":"The echo_id of the Message","example":"1234512"}},"required":["content","echo_id"]},"CreateConversationWidgetDto":{"type":"object","properties":{"name":{"type":"string","description":"The name of the Contact","example":"Agent 1"},"email":{"type":"string","maxLength":74,"format":"email","description":"The email of the Contact","example":"test@gmail.com"},"phone_number":{"type":"string","description":"The phone number of the Contact","example":"+1415555555"},"custom_attributes":{"type":"object","description":"The custom attributes of the Contact","example":{"key":"value"}},"additional_attributes":{"type":"object","description":"The additional attributes of the Contact","example":{"key":"value"}},"message":{"description":"The message of the Contact","allOf":[{"$ref":"#/components/schemas/WidgetMessageDto"}]}},"required":["name"]},"WidgetContactData":{"type":"object","properties":{"id":{"type":"number","description":"The ID of the Contact","example":1},"email":{"type":"string","description":"The email of the Contact","example":"test@gmail.com"},"name":{"type":"string","description":"The name of the Contact","example":"name"},"phone_number":{"type":"string","description":"The phone number of the Contact","example":"+1415555555"},"custom_attributes":{"type":"object","description":"The custom attributes of the Contact","example":{"key":"value"}}},"required":["id","email","name","phone_number","custom_attributes"]},"WidgetContactInboxData":{"type":"object","properties":{"pubsubToken":{"type":"string","description":"The pubsub token id of the Contact Inbox","example":"gNUBwlYpu0wT96O3YU4lwT"}},"required":["pubsubToken"]},"WidgetCreateConversationData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Conversation","example":1}},"required":["id"]},"WidgetCreateConversationPayloadData":{"type":"object","properties":{"contact":{"description":"The contact of the Conversation","allOf":[{"$ref":"#/components/schemas/WidgetContactData"}]},"contactInbox":{"description":"The contact inbox","allOf":[{"$ref":"#/components/schemas/WidgetContactInboxData"}]},"account_id":{"type":"number","description":"The account Id of the Conversation","example":1},"conversation":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/WidgetCreateConversationData"}]}},"required":["contact","contactInbox","account_id","conversation"]},"WidgetCreateConversationPayload":{"type":"object","properties":{"payload":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/WidgetCreateConversationPayloadData"}]}},"required":["payload"]},"WidgetConversationData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Conversation","example":1},"contact_inbox_id":{"type":"number","description":"The contact inbox id of the Conversation","example":1}},"required":["id","contact_inbox_id"]},"SenderData":{"type":"object","properties":{"id":{"type":"number","description":"The id of the sender","example":1},"name":{"type":"string","description":"The name of the sender","example":"name"},"displayName":{"type":"string","description":"The display name of the sender","example":"display name"}},"required":["id","name","displayName"]},"MessageData":{"type":"object","properties":{"id":{"type":"number","description":"The Id of the Message","example":1},"content":{"type":"string","description":"The content of the Message","example":"content"},"account_id":{"type":"number","description":"The accountId of the Message","example":1},"inbox_id":{"type":"number","description":"The inboxId of the Message","example":1},"conversation_id":{"type":"number","description":"The conversationId of the Message","example":1},"dialog_id":{"type":"string","description":"The dialogId of the Message","example":"x1111xx1-11x1-1111-x1x1-1x1111x1xxx1"},"message_type":{"type":"string","description":"The messageType of the Message","example":"incoming","enum":["incoming","outgoing","activity","template"]},"private":{"type":"boolean","description":"The private of the Message","example":true},"pinned":{"type":"boolean","description":"Is pinned message","example":true},"status":{"type":"string","description":"The status of the Message","example":"delivered","enum":["sent","delivered","seen","failed"]},"source_id":{"type":"string","description":"The sourceId of the Message","example":"source_id"},"content_type":{"type":"string","description":"The content_type of the Message","enum":["text","input_text","input_textarea","input_email","input_select","cards","form","article","incoming_email","input_csat"],"example":"text"},"content_attributes":{"type":"object","description":"The content_attributes of the Message","example":{"testAttrKey":"testAttrValue"}},"sender_type":{"type":"string","description":"The sender_type of the Message","enum":["Contact","User","AgentBot"],"example":"User"},"sender_id":{"type":"number","description":"The sender_id of the Message","example":"sender_id"},"external_source_ids":{"type":"object","description":"The external_source_ids of the Message","example":{}},"created_at":{"type":"number","description":"The created_at of the Message","example":1673611023},"updated_at":{"type":"number","description":"The updated_at of the Message","example":1673611099},"attachments":{"type":"object","description":"The attachments of the Message","example":[]},"echo_id":{"type":"string","description":"The echo_id of the Message","example":"ccfd129e40a3"},"sender":{"description":"The sender of the Message","allOf":[{"$ref":"#/components/schemas/SenderData"}]}},"required":["id","content","account_id","inbox_id","conversation_id","dialog_id","message_type","private","pinned","status","source_id","content_type","content_attributes","sender_type","sender_id","external_source_ids","created_at","updated_at","attachments","echo_id","sender"]},"WidgetConversationPayload":{"type":"object","properties":{"conversation":{"description":"The payload of the Conversation","allOf":[{"$ref":"#/components/schemas/WidgetConversationData"}]},"messages":{"description":"The messages of the Conversation","type":"array","items":{"$ref":"#/components/schemas/MessageData"}}},"required":["conversation","messages"]},"WidgetGetAvatarPayload":{"type":"object","properties":{"agent_id":{"type":"number","description":"The user Id of the Agent","example":1},"avatar_url":{"type":"string","description":"The avatar url of the Agent","example":"https//avatar.url.jpeg"}},"required":["agent_id","avatar_url"]},"WidgetUpdateMessageStatusDto":{"type":"object","properties":{"status":{"type":"string","description":"The message status to be changed to","example":"seen"},"messageIds":{"description":"The array of messages ids","example":"[1, 2]","type":"array","items":{"type":"number"}}},"required":["status","messageIds"]},"ExceptionBadRequest":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Validation failed"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message","error"]},"ExceptionNotFound":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message","error"]},"SdkGetContactDataDto":{"type":"object","properties":{"pubsubToken":{"type":"string","description":"The pubsubToken of the Contact Inbox","example":"pz2fz1TYPNe3SxVcs2T9fn"}},"required":["pubsubToken"]}}}}